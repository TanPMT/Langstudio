import{y as k,U as F,J as l,o as g,u as f,b as m,a as s,w as r,X as b,at as S,e as c,d as p,au as q,t as _,n as C,E as A,I as B,F as N}from"./index-CKNFkSVT.js";import{F as P}from"./vee-validate-GsyDsh7C.js";const U={class:"d-sm-flex align-center mt-2 mb-7 mb-sm-0"},D={class:"ml-auto"},I={key:0,class:"mt-2"},L={class:"mt-5 text-right"},T=k({__name:"AuthLogin",setup(R){const y=F(),v=l(!1),V=l(!1),n=l(!1),i=l(""),d=l(""),x=l([t=>!!t||"Password is required",t=>t&&t.length<=30||"Password must be less than 30 characters"]),w=l([t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"]);async function E(t,{setErrors:e}){var o,u;try{console.log("Sending login request:",{email:d.value,password:i.value}),await y.login(d.value,i.value)}catch(a){console.error("Login error:",a);const h=((u=(o=a.response)==null?void 0:o.data)==null?void 0:u.message)||"Login failed. Please try again.";throw e({apiError:h}),a}}return(t,e)=>(g(),f(N,null,[e[7]||(e[7]=m("h5",{class:"text-h5 text-center my-4 mb-8"},"Sign in",-1)),s(A(P),{onSubmit:E,class:"mt-7 loginForm"},{default:r(({errors:o,isSubmitting:u})=>[s(b,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),rules:w.value,label:"Email Address / email",class:"mt-4 mb-8",required:"",density:"comfortable","hide-details":"auto",variant:"outlined",color:"primary"},null,8,["modelValue","rules"]),s(b,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),rules:x.value,label:"Password",required:"",density:"comfortable",variant:"outlined",color:"primary","hide-details":"auto","append-icon":n.value?"$eye":"$eyeOff",type:n.value?"text":"password","onClick:append":e[2]||(e[2]=a=>n.value=!n.value),class:"pwdInput"},null,8,["modelValue","rules","append-icon","type"]),m("div",U,[s(S,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),rules:[a=>!!a||"You must agree to continue!"],label:"Remember me?",required:"",color:"primary",class:"ms-n2","hide-details":""},null,8,["modelValue","rules"]),m("div",D,[s(c,{variant:"plain",to:"/forgotpass",class:"text-primary text-decoration-none"},{default:r(()=>e[4]||(e[4]=[p("Forgot password?")])),_:1})])]),s(c,{color:"secondary",loading:u,block:"",class:"mt-2",variant:"flat",size:"large",disabled:V.value,type:"submit"},{default:r(()=>e[5]||(e[5]=[p(" Sign In")])),_:2},1032,["loading","disabled"]),o.apiError?(g(),f("div",I,[s(q,{color:"error"},{default:r(()=>[p(_(o.apiError),1)]),_:2},1024)])):C("",!0)]),_:1}),m("div",L,[s(B),s(c,{variant:"plain",to:"/register",class:"mt-2 text-capitalize mr-n2"},{default:r(()=>e[6]||(e[6]=[p("Don't Have an account?")])),_:1})])],64))}});export{T as _};
