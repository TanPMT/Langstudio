import{o as h,u as c,a as i,w as a,e as u,b as l,G as b,ae as k,al as M,a0 as f,F as m,q as V,d as o,am as _,an as D,A as T,v,V as x,f as I,ao as S,c as L,p as A,af as y,l as P,t as d,m as B,ap as N,M as O}from"./index-CKNFkSVT.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={name:"ChatPopupSidebar",data:()=>({sidebarOpen:!1,newMessage:"",messages:[{role:"ai",content:"Hello! How can I assist you today?"}],chatHistory:[{id:2,title:"Conversation 2",preview:"Type your mess..."},{id:1,title:"Conversation 1",preview:"Hello! How can..."}],currentChat:0}),methods:{adjustHeight(){const e=this.$refs.inputDiv,t=document.querySelector(".messages-container");e.style.height="auto",e.style.height=`${e.scrollHeight}px`;const p=70-e.scrollHeight/10,g=Math.max(p,55);t.style.maxHeight=`${g}vh`},updateMessage(){const e=this.$refs.inputDiv;this.newMessage=e.innerText.trim(),this.adjustHeight()},handlePaste(e){e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},sendMessage(){this.newMessage.trim()&&(this.messages.push({role:"user",content:this.newMessage}),this.chatHistory[this.currentChat].preview=this.newMessage.substring(0,20)+"...",setTimeout(()=>{const e="This is a simulated response to: "+this.newMessage;this.messages.push({role:"ai",content:e}),this.chatHistory[this.currentChat].preview=e.substring(0,20)+"..."},500),this.newMessage="",this.$nextTick(()=>{const e=this.$refs.inputDiv;e.innerHTML="",e.style.height="auto"}))},newChat(){this.messages=[{role:"ai",content:"Hello! How can I assist you today?"}],this.chatHistory.unshift({id:Date.now(),title:"Conversation "+(this.chatHistory.length+1),preview:"Hello! How can..."}),this.currentChat=0},loadChat(e){this.currentChat=e,this.messages=[{role:"user",content:"Previous message from chat "+this.chatHistory[e].title},{role:"ai",content:"Response to chat "+this.chatHistory[e].title}]},deleteChat(e){this.chatHistory.length===1&&this.newChat(),this.chatHistory.splice(e,1),this.currentChat===e?(this.currentChat=0,this.loadChat(0)):this.currentChat>e&&this.currentChat--}},mounted(){this.adjustHeight()}},R={class:"v-app div-all"},q={style:{background:"#f8fafc"},class:"v-main-div"},F={class:"d-flex align-center mb-1"},K={class:"white--text"},U={class:"message-content"},E={class:"pa-4 textarea-container",style:{background:"white"}};function G(e,t,C,w,p,n){const g=V("v-list-item-content");return h(),c(m,null,[i(u,{color:"primary",onClick:n.toggleSidebar,class:"ma-4 btn-history"},{default:a(()=>t[4]||(t[4]=[o(" History ")])),_:1},8,["onClick"]),l("div",R,[i(b,{modelValue:e.sidebarOpen,"onUpdate:modelValue":t[0]||(t[0]=s=>e.sidebarOpen=s),temporary:"",app:"",width:"320",class:"elevation-2"},{default:a(()=>[i(_,{flat:"",color:"grey lighten-4"},{default:a(()=>[i(D,{class:"font-weight-medium"},{default:a(()=>t[5]||(t[5]=[o("Conversations")])),_:1}),i(u,{color:"primary",onClick:n.newChat,class:"btn-newchat"},{default:a(()=>t[6]||(t[6]=[o(" New Conversation ")])),_:1},8,["onClick"]),i(u,{icon:"",onClick:n.toggleSidebar,color:"black"},{default:a(()=>t[7]||(t[7]=[o(" âœ– ")])),_:1},8,["onClick"])]),_:1}),i(T,{dense:"",nav:"",class:"py-0"},{default:a(()=>[(h(!0),c(m,null,v(e.chatHistory,(s,r)=>(h(),L(A,{key:s.id,onClick:H=>n.loadChat(r),class:y({"grey lighten-3":e.currentChat===r}),"two-line":""},{default:a(()=>[i(g,null,{default:a(()=>[i(P,null,{default:a(()=>[o(d(s.title),1)]),_:2},1024),i(B,null,{default:a(()=>[o(d(s.preview),1)]),_:2},1024)]),_:2},1024),i(N,null,{default:a(()=>[i(u,{color:"primary",onClick:f(H=>n.deleteChat(r),["stop"]),class:"btn-del"},{default:a(()=>t[8]||(t[8]=[o(" Delete ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["modelValue"]),l("div",q,[i(k,{fluid:"",class:"fill-height pa-0"},{default:a(()=>[i(x,{class:"fill-height","no-gutters":""},{default:a(()=>[i(I,{class:"d-flex flex-column"},{default:a(()=>[l("div",{class:"messages-container",style:S({maxHeight:e.messagesMaxHeight})},[(h(!0),c(m,null,v(e.messages,(s,r)=>(h(),c("div",{key:r,class:"mb-6"},[l("div",{class:y(["message-bubble",{"ml-auto user-message":s.role==="user","mr-auto":s.role==="ai"}])},[l("div",F,[i(O,{size:"32",color:s.role==="user"?"primary":"grey lighten-1",class:"mr-3"},{default:a(()=>[l("span",K,d(s.role==="user"?"U":"AI"),1)]),_:2},1032,["color"]),l("strong",null,d(s.role==="user"?"You":"Assistant"),1)]),l("p",U,d(s.content),1)],2)]))),128))],4)]),_:1})]),_:1})]),_:1})]),l("div",E,[l("div",{ref:"inputDiv",class:"textarea",variant:"outlined",contenteditable:"true",onInput:t[1]||(t[1]=(...s)=>n.updateMessage&&n.updateMessage(...s)),onKeydown:t[2]||(t[2]=M(f((...s)=>n.sendMessage&&n.sendMessage(...s),["prevent"]),["enter"])),onPaste:t[3]||(t[3]=(...s)=>n.handlePaste&&n.handlePaste(...s)),placeholder:"Type your message here..."},null,544),i(u,{color:"primary",elevation:"0",onClick:n.sendMessage,height:"28",class:"btn-send"},{default:a(()=>t[9]||(t[9]=[o(" Send ")])),_:1},8,["onClick"])])])],64)}const Q=j(z,[["render",G],["__scopeId","data-v-fd6b2a88"]]);export{Q as default};
